<!DOCTYPE html>
<html>
<head>
    <title>springboard</title>
</head>
<body>
    <pre>springboard</pre>
</body>
<script type="text/javascript" src="gamePiece.js"></script>
<script type="text/javascript">
    // util
    const px = (size) => `${size}px`;
    const rgb = (r, g = r, b = r) => `rgb(${r},${g},${b})`;
    const border = (size, color) => `${px(size)} solid ${color}`;

    const dragGroup = [];

    let lastElement;

    BOARD_TILE_DIM = 80;
    const BOARD_TILE_STYLE = {
        backgroundColor: rgb(255),
        border: border(2, rgb(0)),
        width: px(BOARD_TILE_DIM),
        height: px(BOARD_TILE_DIM),
    }

    Array(15).fill().map((row, rowIndex) => {
        Array(20).fill().map((column, columnIndex) => {
            createElement({
                style: {
                    top: px(rowIndex * BOARD_TILE_DIM),
                    left: px(columnIndex * BOARD_TILE_DIM),
                    ...BOARD_TILE_STYLE,
                },
            });
        });
    });

    document.onmousemove = ({ clientX, clientY }) => {
        if (dragGroup.length) {
            dragGroup.map((element) => {
                const { x = 0, y = 0 } = element.dragOffset;

                element.xy(clientX - x, clientY - y);

                if (element.dragAction) {
                    element.dragAction();
                }
            });
        }
    };

    document.onmouseup = ({ clientX, clientY, button }) => {
        // Left button
        if (button === 0) {
            if (dragGroup.length) {
                dragGroup.length = 0;
            }
            else {
                lastElement = createElement({
                    draggable: true,
                    style: {
                        top: px(clientY),
                        left: px(clientX),
                    },
                });
            }
        }
    };

    document.oncontextmenu = () => false;
</script>
</html>
